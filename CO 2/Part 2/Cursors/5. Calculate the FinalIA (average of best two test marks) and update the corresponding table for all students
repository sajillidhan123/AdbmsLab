//Cursor 

create or replace procedure avgmarks is
cursor curs is
select greatest(Test1,Test2) as A,greatest(Test1,Test3) as B,greatest(Test3,Test2) as C
from IAmarks where Final_IAmarks is null for update;
C_A number;
C_B number;
C_C number;
C_SM number;
C_AV number;
begin
open curs;
loop
fetch curs into C_A, C_B, C_C;
exit when curs%notfound;
dbms_output.put_line(C_A || ' ' || C_B || ' ' || C_C);
if (C_A != C_B) then
C_SM:=C_A+C_B;
else
C_SM:=C_A+C_C;
end if;
C_AV:=C_SM/2;
update IAmarks set Final_IAmarks=C_AV where current of curs;
end loop;
close curs;
end;
 /
 
 //Execution
 
 exec avgmarks;
